import{t as C}from"./index-fbe27e09.js";import{d as F}from"./db-43d10708.js";import{_ as T,s as x,m as V,r as l,b as D,o as a,c as u,w as c,d as U,e as d,f as i,F as b,h as B,j as v,p as L,J as P,k as A,q as k}from"./index-b9487ae2.js";const M={data(){return{list:[],loading:!1,finished:!1,store:x}},watch:{"store.account"(t,e){this.list=[],this.loading=!1,this.finished=!1}},methods:{changeTimestampToDataFormat(t){const e=new Date(t);return e.getDate()+"/"+(e.getMonth()+1)+"/"+e.getFullYear()+" "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()},goToView(t){return t},buildCidUrl(t){return"https://elfinguard.io/"+t},async onLoad(){const t=await V();console.log("current account:",t),this.list=await F.viewedFiles.where({account:t}).limit(100).toArray(),this.loading=!1,this.finished=!0},copyText(t){let e=document.createElement("input");e.setAttribute("readonly","readonly"),e.value=t,document.body.appendChild(e),e.select(),document.execCommand("Copy"),e.style.display="none",e.remove(),C.showSuccessToast("Copy successfully")}}},S=["href"],E=["onClick"];function N(t,e,f,m,s,o){const r=l("van-nav-bar"),y=l("van-col"),p=l("van-cell"),h=l("van-row"),_=l("van-list"),g=l("van-popup"),w=D("responsive-popup");return a(),u(g,{show:!0,position:"left",style:{width:"100%",height:"100%"}},{default:c(()=>[U((a(),d("div",null,[i(r,{title:"ViewedFiles","left-text":"Back","left-arrow":"",onClickLeft:e[0]||(e[0]=n=>t.$emit("back"))}),i(_,{loading:s.loading,"onUpdate:loading":e[1]||(e[1]=n=>s.loading=n),finished:s.finished,"finished-text":"no more",onLoad:o.onLoad},{default:c(()=>[(a(!0),d(b,null,B(s.list,n=>(a(),u(h,{key:n.id,style:{color:"black"}},{default:c(()=>[i(y,{span:"12",style:{"margin-left":"10px"}},{default:c(()=>[v("a",{href:o.goToView(n.cid),target:"_blank"},L(n.cid),9,S),v("i",{class:"iconfont icon-copy iconFont",onClick:H=>o.copyText(o.buildCidUrl(n.cid))},null,8,E)]),_:2},1024),i(p,{title:n.introduction,value:o.changeTimestampToDataFormat(n.timestamp)},null,8,["title","value"])]),_:2},1024))),128))]),_:1},8,["loading","finished","onLoad"])])),[[w]])]),_:1})}const I=T(M,[["render",N]]);const Y={data(){return{list:[],loading:!1,finished:!1,store:x}},watch:{"store.account"(t,e){this.list=[],this.loading=!1,this.finished=!1}},methods:{buildPayInfo(t){return t=Number(t)/10**18,"Paid "+t+" BCH"},changeTimestampToDataFormat(t){const e=new Date(t);return e.getDate()+"/"+(e.getMonth()+1)+"/"+e.getFullYear()+" "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()},goToView(t){return t},goToTxExplore(t,e,f){if(t==="SMART_CHAIN"){const{blockExplorerUrl:m}=P(e);return e===1e4?`${m}/transaction/`+f:`${m}/tx/`+f}return"https://blockchair.com/bitcoin-cash/transaction/"+f},buildCidUrl(t){return"https://elfinguard.io/"+t},async onLoad(){const t=await V();console.log("current account:",t),this.list=await F.payments.where({account:t}).limit(100).toArray(),this.loading=!1,this.finished=!0},copyText(t){let e=document.createElement("input");e.setAttribute("readonly","readonly"),e.value=t,document.body.appendChild(e),e.select(),document.execCommand("Copy"),e.style.display="none",e.remove(),C.showSuccessToast("Copy successfully")}}},$=["href"],j=["onClick"],q=["href"],J={key:1};function R(t,e,f,m,s,o){const r=l("van-nav-bar"),y=l("van-col"),p=l("van-cell"),h=l("van-row"),_=l("van-list"),g=l("van-popup"),w=D("responsive-popup");return a(),u(g,{show:!0,position:"left",style:{width:"100%",height:"100%"}},{default:c(()=>[U((a(),d("div",null,[i(r,{title:"PaymentHistory","left-text":"Back","left-arrow":"",onClickLeft:e[0]||(e[0]=n=>t.$emit("back"))}),i(_,{loading:s.loading,"onUpdate:loading":e[1]||(e[1]=n=>s.loading=n),finished:s.finished,"finished-text":"no more",onLoad:o.onLoad},{default:c(()=>[(a(!0),d(b,null,B(s.list,n=>(a(),u(h,{key:n.id,style:{color:"black"}},{default:c(()=>[i(y,{span:"",style:{"margin-left":"10px"}},{default:c(()=>[v("a",{href:o.goToView(n.cid),target:"_blank"},L(n.cid),9,$),v("i",{class:"iconfont icon-copy iconFont",onClick:H=>o.copyText(o.buildCidUrl(n.cid))},null,8,j)]),_:2},1024),i(p,{title:n.introduction,value:o.changeTimestampToDataFormat(n.timestamp)},null,8,["title","value"]),i(p,{value:o.buildPayInfo(n.amount)},{extra:c(()=>[A("    "),n.txId?(a(),d("a",{key:0,href:o.goToTxExplore(n.type,n.chainId,n.txId),target:"_blank"}," View TX ",8,q)):k("",!0),n.txId?k("",!0):(a(),d("span",J,"No tx"))]),_:2},1032,["value"])]),_:2},1024))),128))]),_:1},8,["loading","finished","onLoad"])])),[[w]])]),_:1})}const X=T(Y,[["render",R]]);const z={data(){return{list:[],loading:!1,finished:!1,store:x}},watch:{"store.account"(t,e){this.list=[],this.loading=!1,this.finished=!1}},methods:{changeTimestampToDataFormat(t){const e=new Date(t);return e.getDate()+"/"+(e.getMonth()+1)+"/"+e.getFullYear()+" "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()},goToView(t){return t},buildCidUrl(t){return"https://elfinguard.io/"+t},async onLoad(){const t=await V();console.log("current account:",t),this.list=await F.uploadedFiles.where({account:t}).limit(100).toArray(),this.loading=!1,this.finished=!0},copyText(t){let e=document.createElement("input");e.setAttribute("readonly","readonly"),e.value=t,document.body.appendChild(e),e.select(),document.execCommand("Copy"),e.style.display="none",e.remove(),C.showSuccessToast("Copy successfully")}}},G=["href"],K=["onClick"];function O(t,e,f,m,s,o){const r=l("van-nav-bar"),y=l("van-col"),p=l("van-cell"),h=l("van-row"),_=l("van-list"),g=l("van-popup"),w=D("responsive-popup");return a(),u(g,{show:!0,position:"left",style:{width:"100%",height:"100%"}},{default:c(()=>[U((a(),d("div",null,[i(r,{title:"UploadedFiles","left-text":"Back","left-arrow":"",onClickLeft:e[0]||(e[0]=n=>t.$emit("back"))}),i(_,{loading:s.loading,"onUpdate:loading":e[1]||(e[1]=n=>s.loading=n),finished:s.finished,"finished-text":"no more",onLoad:o.onLoad},{default:c(()=>[(a(!0),d(b,null,B(s.list,n=>(a(),u(h,{key:n.id,style:{color:"black"}},{default:c(()=>[i(y,{span:"12",style:{"margin-left":"10px"}},{default:c(()=>[v("a",{href:o.goToView(n.cid),target:"_blank"},L(n.cid),9,G),v("i",{class:"iconfont icon-copy iconFont",onClick:H=>o.copyText(o.buildCidUrl(n.cid))},null,8,K)]),_:2},1024),i(p,{title:n.introduction,value:o.changeTimestampToDataFormat(n.timestamp)},null,8,["title","value"])]),_:2},1024))),128))]),_:1},8,["loading","finished","onLoad"])])),[[w]])]),_:1})}const Q=T(z,[["render",O]]),W={components:{ViewedFiles:I,PaymentHistory:X,UploadedFiles:Q},data(){return{showType:"",store:x}},methods:{async onBack(){this.showType=""}}};function Z(t,e,f,m,s,o){const r=l("van-cell"),y=l("ViewedFiles"),p=l("PaymentHistory"),h=l("UploadedFiles");return a(),d(b,null,[i(r,{onClick:e[0]||(e[0]=_=>s.showType="UploadedFiles"),title:"Uploaded Files","is-link":""}),i(r,{onClick:e[1]||(e[1]=_=>s.showType="ViewedFiles"),title:"Viewed Files","is-link":""}),i(r,{onClick:e[2]||(e[2]=_=>s.showType="PaymentHistory"),title:"Payment History","is-link":""}),v("div",null,[s.showType==="ViewedFiles"?(a(),u(y,{key:0,onBack:o.onBack},null,8,["onBack"])):k("",!0),s.showType==="PaymentHistory"?(a(),u(p,{key:1,onBack:o.onBack},null,8,["onBack"])):k("",!0),s.showType==="UploadedFiles"?(a(),u(h,{key:2,onBack:o.onBack},null,8,["onBack"])):k("",!0)])],64)}const oe=T(W,[["render",Z]]);export{oe as default};
